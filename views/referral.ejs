<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard</title>
  <!-- Favicon -->
  <link
  rel="shortcut icon"
  href="../Images/logo.ico"
  type="image/x-ico"
/>
  <!-- Google Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Merriweather+Sans:wght@400;500;600;700;800&display=swap"
    rel="stylesheet" />
       <!-- Bootstrap Icon -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
  <!-- Stylesheet -->
  <link rel="stylesheet" href="../CSS/main.css" />
  <!-- Custom JavaScript -->
  <script defer src="../JS/dashboard.js"></script>
</head>

<body class="bg-darkGray main">
  <%- include ("partials/sidebar"); -%> <%- include ("partials/script"); -%>
      <section>
        <div class="px-8 py-4">
          <div class="mt-20">
            <h1 class="text-xl font-bold text-[#CC9E06] sm:text-2xl md:text-3xl lg:text-4xl">
              My Referral
            </h1>
            <div class="flex flex-col-reverse gap-5 md:flex-row md:justify-between md:items-center mt-10">
              <div class="md:w-[49%] h-40 rounded-lg border border-[#9EA0A3] bg-white p-2 md:p-4">
                <p class="font-bold">Your Referral Link</p>
                <div class="flex flex-col md:flex-row gap-5 mt-2 sm:mt-4 md:mt-6">
                  <div class="border border-[#9EA0A3] p-2 rounded-md">
                   <p id="referral-link" class="mx-auto text-xs sm:text-sm md:text-xs lg:text-sm">https://www.rehoniel.org/user/create?ref=<%= user.userId %></p> 
                  </div>
                  <button class="flex items-center mx-auto gap-2 p-2 text-xs lg:text-sm rounded-md border border-[#6564DB]" onclick="copy()"><img src="../Images/copy.svg" alt="copy icon">Copy</button>
                </div>
              </div>
              <div class="flex gap-5 items-center md:w-[49%] h-40 rounded-lg border border-[#9EA0A3] referGradient p-2 md:p-4">
                <div>
                  <img src="../Images/referral.svg" alt="Referral Icon">
                </div>
                <div class="flex flex-col justify-between h-full">
                  <p class="text-xs sm:text-sm md:text-base text-lightGray1">Earn upto <span class="text-[#EFBC16] font-bold">10% </span>on Referral Deposits</p>
                  <div class="flex justify-between">
                    <p class="text-sm sm:text-base md:text-lg lg:text-xl text-lightGray1">Number of Referrals</p> 
                    <p class="text-lg fon-black sm:text-xl md:text-2xl lg:text-3xl text-[#EFBC16]"><%= user.referrals.length %></p>
                  </div>
                </div>
              </div>
            </div>
            <div class="mt-10 rounded-lg border border-[#9EA0A3] bg-white p-2 sm:p-4">
              <p class="text-xs sm:text-sm md:text-base font-bold">Your Referral List</p>
              <% user.referrals.forEach(referral=> {%>
              <div class="flex justify-between items-center mt-4">
                <div class="flex gap-2">
                  <img src="../Images/referral.png" class="w-8 border border-[#9EA0A3] rounded-[50%]" alt="Referral Icon">
                  <div>
                  
                    <p class="text-[0.65rem] sm:text-xs md:text-sm"><%= referral.username || "user" %></p>
                    
                    <p class="text-[0.65rem] sm:text-xs md:text-sm"><%= referral.email%></p>
                  </div>
                </div>
                <p class="text-[0.65rem] sm:text-xs md:text-sm"><%= new Date(referral.createdAt).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' }) %>.</p>
                <div class="hidden sm:block p-2 bg-gray-200 text-red-600 rounded-lg text-[0.65rem] sm:text-xs md:text-sm">
                  Active
                </div>
              </div>
              <% }) %>
            </div>
          </div>
        </div>
      </section>
      <script src="../JS/referral.js"></script>
</body>

</html>